<h1 style="font-size: 50px"> Лекция № 2.  Теория контекстно-свободных языков </h1>

<div style="font-size: 30px"> 
<br><b>Определение 1.</b> КС-грамматика называется приведенной, если она не
имеет циклов, ε-правил и бесполезных символов. 

Рассмотрим основные алгоритмы приведения КС-грамматик. 
Перед всеми другими исследованиями и преобразованиями КС-грамматик выполняется проверка существования языка грамматики. 

<br><b><u>Алгоритм 1.</b></u> Проверка существования языка грамматики

Вход: КС-грамматика G = ($V^{T}$, $V^{N}$ , P, S). 
Выход: заключение о существовании или отсутствии языка грамматики. 

Определим множество нетерминалов, порождающих терминальные строки  . 

<br><b><i>Шаг 1.</b></i> Положить $N_{0} = Ø. 
<br><b><i>Шаг 2.</b></i> Вычислить: 
   
<br><b><i>Шаг 3.</b></i> Если, то положить i=i+1 и перейти к пункту 2, иначе
считать. 

Если, то выдать сообщение о том, что язык грамматики существует, иначе сообщить об отсутствии языка. 
<br><b><u>Пример 2.1.</b></u> Дана грамматика, где множество
правил P:
  
Построим последовательность приближений множества N: 
$N_{0} = Ø$; 
$N_{1} = {A, B}$; 
$N_{2} = {S, A, B}$; 
$N_{3} = {S, A, B}$. 

Т.к. $N_{2} = N_{3}$, то N = {S, A, B}, следовательно, язык грамматики существует, 
потому что начальный символ: 

<br><b>Определение 2.</b> Бесполезными символами грамматики называют: 
- нетерминалы, не порождающие терминальных строк, т.е. множество
символов
 
- недостижимые нетерминалы, порождающие терминальные строки, т.е. 
множество символов
 
- недостижимые терминалы, т.е. множество символов
 

<br><b><u>Алгоритм 2.</b></u> Устранение нетерминалов, не порождающих терминальных строк

<br>Вход: КС-грамматика G = ($V^{T}$, $V^{N}$ , P, S). 
<br>Выход: КС-грамматика, такая, что .. (и для всех .. существуют выводы .., где ..). 

<br><b><i>Шаг 1.</b></i> Определить множество нетерминалов, порождающих терминальные строки, с помощью <b>алгоритма 2.1.</b>

<br><b><i>Шаг 2.</b></i> Вычислить
...
где ..- это множество правил, содержащих бесполезные нетерминалы   . 

<br><b><u>Пример 2.2.</b></u> Дана грамматика .. с правилами P: .. Преобразуем ее в эквивалентную грамматику G′ по алгоритму 2.2: 

$N_{0} = Ø;$
$N_{1} = {S, B, C};$
$N_{2} = {S, B, C}.$ 

Т.к. $N_{1} = N_{2}$, то N = {S, B, C}. После удаления бесполезных нетерминалов
и правил вывода, получим грамматику .. с правилами .. P′ :    

<br><b><u>Алгоритм 3.</b></u> Устранение недостижимых символов

<br>Вход: КС-грамматика  G = ($V^{T}$, $V^{N}$, P, S). 
<br>Выход: КС-грамматика,  такая, что .. и для всех .. существует вывод, где .. . 

Определим множество достижимых символов Z грамматики G, т.е. множество
...

<br><b><i>Шаг 1.</b></i> Положить  ...
<br><b><i>Шаг 2.</b></i> Вычислить очередное приближение следующим образом: 
...
<br><b><i>Шаг 3.</b></i> Если .., ... то положить $i := i+1$ и перейти к шагу 2, иначе считать  ....
<br><b><i>Шаг 4.</b></i> Вычислить ..
 
где .. - это множество правил, содержащих недостижимые символы .. . 

<br><b><u>Пример 2.3.</b></u> Дана грамматика ... с правилами P′: ... .

Преобразуем ее в эквивалентную грамматику G′ по алгоритму 2.3: 
$W_{0} = {S};$
$W_{1} = {S, a, b};$
$W_{2} = {S, a, b}.$

Т.к. $W_{1} = W_{2}$, то W = {S, a, b}.  Множество недостижимых символов
 ... 
Тогда после удаления недостижимых символов, получим
грамматику с правилом P′: ... .

<br><b><u>Алгоритм 4.</b></u> Устранение ε-правил
<br>Вход: КС-грамматика ... . 
<br>Выход: Эквивалентная КС-грамматика .. без ε-правил для всех нетерминальных символов, кроме начального, который не должен встречаться в правых частях правил грамматики.
 
<br><b><i>Шаг 1.</b></i> В исходной грамматике G найти ε-порождающие нетерминальные
символы, такие, что .. . 

- 1.1 Положить  
- 1.2 Вычислить   
- 1.3 Если  , то положить $i := i+1$ и перейти к пункту 1.2, иначе считать  ... .

<br><b><i>Шаг 2.</b></i> Из множества P правил исходной грамматики G перенести во
множество P′ все правила, за исключением ε-правил, т.е. 
 ...

<br><b><i>Шаг 3.</b></i> Пополнить множество P′ правилами, которые получаются из каждого правила этого множества путем исключения всевозможных комбинаций
ε-порождающих нетерминалов в правой части. Полученные при этом ε-правила во множество P′ не включать. 

<br><b><i>Шаг 4.</b></i> Если ... , то ... , где .. иначе ... .

<br><b><u>Пример4.4.</b></u> Дана грамматика G=({0,1}, {S, A, B}, P, S) и правилами P .. :
 .. Преобразуем  ее  в  эквивалентную грамматику по <b>алгоритму 4</b>. 

<br><b><i>Шаг 1.</b></i> 
$N_{0} = {A, B};$ 
$N_{1} = {S, A, B};$ 
$N_{2} = {S, A, B}.$ 
Т.к. $N_{1} = N_{2}$, то искомое множество построено и N = {S, A, B}. 
<br><b><i>Шаг 2, 3.</b></i> Множество P′: 
- S → AB | A| B
- A → 0A| 0; 
- B → 1B |1. 
<br><b><i>Шаг 4.</b></i> Т.к. S ∈ N, то введем новый нетерминал С и пополним множество  
P′ правилом вида C → S |ε. Результирующая грамматика будет иметь вид: 
... с правилами P′:

1) C → S|ε; 
2) S → AB|A|B  ;
 

<br><b><u>Алгоритм 5.</b></u> Устранение цепных правил 
 
<br>Вход: КС-грамматика G=($V^{T}$, $V^{N}$, P, S)
<br>Выход:  Эквивалентная  КС-грамматика  G′ = ($V^{T}$, $V^{'N}$, P′, S′)  без  цепных 
правил, т.е. правил вида A → B, где A,B ∈ $V^{N}$. 
 
<br><b><i>Шаг 1.</b></i> Для каждого нетерминала  A вычислить множество выводимых из 
него нетерминалов, т.е. множество $N^{A}$ ={B | A ⇒* B  где B ∈ $V^{N}$}. 
- 1.1 Положить $N_{0}^{A}$ = {A}. 
- 1.2 Вычислить $N_{i}^{A} = $N_{i−1}^{A}$ ∪ { C | (B → C) ∈ P , $B ∈ N_{i−1}^{A}$, C ∈ $V^{N}$}$. 
- 1.3 Если  $N_{i}^{A} ≠ N_{i−1}^{A}$,  то  положить  $i := i+1$  и  перейти  к  пункту 1.2, иначе 
считать $N_{A} = N_{i}^{A}$.

<br><b><i>Шаг 2.</b></i> Построить множество P′ так: если  (B → α) ∈ P не является цепным правилом (α ∉ $V^{N}$, то) включить в  P′ правило  A → α  для каждого A, такого, что  B ∈ $N^{A}$. 
 
<br><b>Пример 2.5.</b> Грамматика G=({+,n}, {L, M, N}, P, L)  с  правилами P:
 ... 
Преобразуем  ее  в  эквивалентную грамматику G′ по <b>алгоритму 5</b>. 
<br><b></i>Шаг 1.</b></i>
  
Т.к. $N_{2}L = N_{3}L$, то NL ={L, M, N}. 
 
 
<br><b><i>Шаг 2.</b></i> Преобразовав правила вывода грамматики, получим грамматику 
 с правилами P′: 
...

<br><b><u>Алгоритм 6.</b></i> Устранение левой факторизации правил 
 
<br>Вход: КС-грамматика G = ($V^{T}$, $V^{N}$, P,S).
<br>Выход: Эквивалентная КС-грамматика G′ = ($V^{T}$ , $V^{'T}$, P′, S′) .. без одинаковых префиксов в правых частях правил, определяющих нетерминалы. 
 
<br><b><i>Шаг 1.</b></i> Записать все правила для нетерминала X, имеющие одинаковые 
префиксы α ∈ $V&{*}$, в виде одного правила с альтернативами: 

<br><b><i>Шаг 2.</b></i> Вынести  за  скобки  влево  префикс  α   в  каждой  строке-альтернативе: X → α(β1|β2|...|βn). 

<br><b><i>Шаг 3.</b></i> Обозначить новым нетерминалом Y выражение, оставшееся в скобках:  X → αY, Y → β1 |β2 |...|βn. 

<br><b><i>Шаг 4.</b></i> Пополнить множество нетерминалов новым нетерминалом Y .. и 
заменить правила, подвергшиеся факторизации, новыми правилами для X и Y. 

<br><b><i>Шаг 5.</b></i> Повторить шаги 1-4 для всех нетерминалов грамматики, для которых это возможно и необходимо. 
 
<br><b>Пример 2.6.</b> Дана грамматика G=({k,l,m ,n}, {S}, P, S)  с правилами P .. :\
Преобразуем  ее  в эквивалентную грамматику G′ по <b>алгоритму 6</b>: 

<br><b><i>Шаг 1.</b></i> S → kSl | kSm | n. 

<br><b><i>Шаг 2.</b></i> S → kS (l | m) | n. 

<br><b><i>Шаг 3,4.</b></i> Пополнив множество нетерминалов новым нетерминалом С и 
заменив правила, подвергшиеся факторизации, получим грамматику.
 
.. с правилами P′:
- S → kSC; 
- S → n; 
- C → l; 
- C → m.
<br><b><u>Алгоритм 7.</b></u> Устранение прямой левой рекурсии 
 
<br>Вход: КС-грамматика G=($V^{T}$, $V^{N}$, P, S).
<br>Выход:  Эквивалентная  КС-грамматика G′ = ($V^{T}$, $V^{'N}$, P′, S′)  без  прямой левой рекурсии, т.е. без правил вида A→ Aα, A ∈VN, α∈V*  .

<br><b><i>Шаг 1.</b></i> Вывести из грамматики все правила для рекурсивного нетерминала X: 
 

<br><b><i>Шаг 2.</b></i> Внести новый нетерминал Y так, чтобы он описывал любой 
«хвост» строки, порождаемой рекурсивным нетерминалом X : 
 
 
<br><b><i>Шаг 3.</b></i> Заменить в рекурсивном правиле для X правую часть, используя 
новый нетерминал и все не рекурсивные правила для X так, чтобы генерируемый язык не изменился: 
 

<br><b><i>Шаг 4.</b></i> Пополнить множество нетерминалов грамматики новым нетерминалом Y. Пополнить множество правил грамматики правилами, полученными на шаге 3. 

<br><b><i>Шаг 5.</b></i> Повторить действия шагов 1-4 для всех рекурсивных нетерминалов грамматики, после чего полученные множества нетерминалов и правил принять в качестве $V^{'N}$ и P′.
 
<br><b>Пример 4.7.</b> Дана грамматика G=({a, b, c, d, z} ,{S, A, B, C}, P, S) с правилами P:
- S → Aa; 
- A → Bb; 
- B → Cc|d; 
- C → Ccbz |dbz.  
После устранения  прямой  левой  рекурсии  получим  эквивалентную  грамматику 
G′=({a,b,c,d,z}, {S, A, B, C, Z}, P′, S) с правилами  P′:  

</div>
 

