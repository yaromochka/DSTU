<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<h1 style="font-size: 50px" align="center"> Лекция № 2.  Теория контекстно-свободных языков </h1>

<div style="font-size: 30px"> 
<br><b>Определение 1.</b> КС-грамматика называется приведенной, если она не
имеет циклов, ε-правил и бесполезных символов.

Рассмотрим основные алгоритмы приведения КС-грамматик. 
Перед всеми другими исследованиями и преобразованиями КС-грамматик выполняется проверка существования языка грамматики. 

<br><b><u>Алгоритм 1.</u></b> Проверка существования языка грамматики

<br>Вход: КС-грамматика G = (V<sup>T</sup>, V<sup>N</sup>, P, S).
<br>Выход: заключение о существовании или отсутствии языка грамматики.

Определим множество нетерминалов, порождающих терминальные строки
N = {Z | Z ∈ V<sup>N</sup>, Z ⇒ *x, x ∈ V<sup>T</sup>}.

<br><b><i>Шаг 1.</i></b> Положить N<sub>0</sub> = Ø.
<br><b><i>Шаг 2.</i></b> Вычислить:
 N<sub>i</sub> = N<sub>i-1</sub> U {A | (A → α) ∈ P и α ∈ (N<sub>i-1</sub> U V<sup>T</sup>)}$
<br><b><i>Шаг 3.</i></b> Если N<sub>i</sub> ≠ N<sub>i-1</sub>, то положить i = i+1 и перейти к пункту 2, иначе
 считать N = N<sub>i</sub>.

Если S ∈ N, то выдать сообщение о том, что язык грамматики существует, иначе сообщить об отсутствии языка.
<br><b><u>Пример 2.1.</u></b> Дана грамматика G = ({0, 1}, {S, A, B}, P, S), где множество
правил P:
  
Построим последовательность приближений множества N: 
<br>N<sub>0</sub> = Ø;
<br>N<sub>1</sub> = {A, B};
<br>N<sub>2</sub> = {S, A, B};
<br>N<sub>3</sub> = {S, A, B}.

 <br>Т.к. N<sub>2</sub> = N<sub>3</sub>, то N = {S, A, B}, следовательно, язык грамматики существует,
потому что начальный символ S ∈ N.

<br><b>Определение 2.</b> Бесполезными символами грамматики называют: 
<br>- нетерминалы, не порождающие терминальных строк, т.е. множество
символов
{X | X ∈ V<sup>N</sup>, ¬∃(X ⇒ *x), x ∈ V<sup>*</sup><sub>T</sub>}
<br>- недостижимые нетерминалы, порождающие терминальные строки, т.е.
множество символов
{X | X ∈ V<sup>N</sup>, ¬∃(S ⇒ *αXß), ∃(X ⇒ *x); α,ß ∈ V<sup>*</sup>; x ∈ V<sup>*</sup><sub>T</sub>}
<br>- недостижимые терминалы, т.е. множество символов
{X | X ∈ V<sup>N</sup>, ¬∃(S ⇒ *αXß); α,ß ∈ V<sup>*</sup>}

<br><b><u>Алгоритм 2.</u></b> Устранение нетерминалов, не порождающих терминальных строк

<br>Вход: КС-грамматика G = (V<sup>T</sup>, V<sup>N</sup> , P, S).
<br>Выход: КС-грамматика G‘ = (V<sub>T</sub>, V‘<sub>N</sub>, P‘, S), такая, что L(G`) = L(G) (и для всех Z ∈ V`<sub>N</sub> существуют
 выводы Z ⇒ *x, где x ∈ V<sup>*</sup><sub>T</sub>).

<br><b><i>Шаг 1.</i></b> Определить множество нетерминалов, порождающих терминальные строки, с помощью <b>алгоритма 2.1.</b>

<br><b><i>Шаг 2.</i></b> Вычислить
V`<sub>N</sub> = V<sub>N</sub> ∩ N, N<sub>Б</sub> = V<sub>N</sub> - V`<sub>N</sub>, P` = P - P<sub>Б</sub>
 где P<sub>Б</sub> ⊆ P - это множество правил, содержащих бесполезные нетерминалы X ∈ N<sub>Б</sub>.

<br><b><u>Пример 2.2.</u></b> Дана грамматика G = ({a, b, c}, {S, A, B, C}, P, S) с правилами P:
 <br> 1) S → ab;
 <br> 2) S → AC;
 <br> 3) A → AB;
 <br> 4) B → b;
 <br> 5) C → cb
 Преобразуем ее в эквивалентную грамматику G′ по алгоритму 2.2:

<br>N<sub>0</sub> = Ø
<br>N<sub>1</sub> = {S, B, C};
<br>N<sub>2</sub> = {S, B, C}.

<br>Т.к. N<sub>1</sub> = N<sub>2</sub>, то N = {S, B, C}. После удаления бесполезных нетерминалов
и правил вывода, получим грамматику G` = ({a, b, c}, {S, B, C}, P`, S) с правилами P′:
<br> 1) S → ab;
<br> 2) B → b;
<br> 3) C → cb;

<br><b><u>Алгоритм 3.</u></b> Устранение недостижимых символов

<br>Вход: КС-грамматика  G = (V<sub>T</sub>, V<sub>N</sub>, P, S).
<br>Выход: КС-грамматика, G` = (V<sub>T</sub>, V`<sub>N</sub>, P`, S) такая, что L(G`) = L(G) и для всех Z ∈ V` существует
 вывод S ⇒ *αZß, где α,ß ∈ V`<sup>*</sup>.

Определим множество достижимых символов Z грамматики G, т.е. множество
W = {Z | Z ∈ V, ∃(S ⇒ *αZß); α,ß ∈ V<sup>*</sup>}

<br><b><i>Шаг 1.</i></b> Положить W<sub>0</sub> = S
<br><b><i>Шаг 2.</i></b> Вычислить очередное приближение следующим образом:
W<sub>i</sub> = W<sub>i - 1</sub> U {X | X ∈ V, (A → αXß) ∈ P, A ∈ W<sub>i - 1</sub>; α,ß ∈ V<sup>*</sup>}
 <br><b><i>Шаг 3.</i></b> Если W<sub>i</sub> ≠ W<sub>i-1</sub>, то положить i := i+1 и перейти к шагу 2, иначе считать W = W<sub>i</sub>
<br><b><i>Шаг 4.</i></b> Вычислить V`<sub>N</sub> = V<sub>N</sub> ∩ W, V`<sub>T</sub> = V<sub>T</sub> ∩ W, V<sub>Б</sub> = V - W
P` = P - P<sub>Б</sub>, где P<sub>Б</sub> ⊆ P - это множество правил, содержащих бесполезные нетерминалы X ∈ V<sub>Б</sub>.

<br><b><u>Пример 2.3.</u></b> Дана грамматика G = ({a, b, c}, {S, A, B, C}, P, S) с правилами P′:
<br> 1) S → ab;
<br> 2) B → b;
<br> 3) C → cb;

Преобразуем ее в эквивалентную грамматику G′ по алгоритму 2.3: 
W<sub>0</sub> = {S};
W<sub>1</sub> = {S, a, b};
W<sub>2</sub> = {S, a, b}.

Т.к. W<sub>1</sub> = W<sub>2</sub>, то W = {S, a, b}.  Множество недостижимых символов V<sub>Б</sub> = {B, C, c}
Тогда после удаления недостижимых символов, получим
грамматику G` = ({a, b}, {S}, P, S) с правилом P′: S → ab.

<br><b><u>Алгоритм 4.</u></b> Устранение ε-правил
<br>Вход: КС-грамматика G = (V<sup>T</sup>, V<sup>N</sup>, P, S).
<br>Выход: Эквивалентная КС-грамматика G‘ = (V<sub>T</sub>, V‘<sub>N</sub>, P‘, S) без ε-правил для всех нетерминальных символов, кроме начального, который не должен встречаться в правых частях правил грамматики.
 
<br><b><i>Шаг 1.</i></b> В исходной грамматике G найти ε-порождающие нетерминальные
символы A ∈ V<sub>N</sub>, такие, что A ⇒ *ε.

<br>- 1.1 Положить N<sub>0</sub> = {A | (A → ε) ∈ P}
 <br>- 1.2 Вычислить N<sub>i</sub> = N<sub>i-1</sub> ∪ {B | (B → α) ∈ P, α ∈ N<sup>*</sup><sub>i-1</sub>}
 <br>- 1.3 Если N<sub>i</sub> ≠ N<sub>i-1</sub>, то положить i := i+1 и перейти к пункту 1.2, иначе считать N = N<sub>i</sub>.

<br><b><i>Шаг 2.</i></b> Из множества P правил исходной грамматики G перенести во
множество P′ все правила, за исключением ε-правил, т.е.
 <br> P` = P - {(A → ε) ∈ P для всех A ∈ V<sub>N</sub>}

<br><b><i>Шаг 3.</i></b> Пополнить множество P′ правилами, которые получаются из каждого правила этого множества путем исключения всевозможных комбинаций
ε-порождающих нетерминалов в правой части. Полученные при этом ε-правила во множество P′ не включать. 

 <br><b><i>Шаг 4.</i></b> Если S ∈ N, то P` = P ∪ {S` → ε, S` → S}, V`<sub>N</sub> = V<sub>N</sub> ∪ S`, где V ∩ {S} = Ø иначе
 V`<sub>N</sub> = V<sub>N</sub>, S` = S.

<br><b><u>Пример 4.4.</u></b> Дана грамматика G=({0,1}, {S, A, B}, P, S) и правилами P:
<br> 1) S → AB;
<br> 2) A → 0A | ε;
<br> 3) B → 1B | ε;
Преобразуем ее в эквивалентную грамматику по <b>алгоритму 4</b>.

<br><b><i>Шаг 1.</i></b>
N<sub>0</sub> = {A, B};
N<sub>1</sub> = {S, A, B};
N<sub>2</sub> = {S, A, B}.
Т.к. N<sub>1</sub> = N<sub>2</sub>, то искомое множество построено и N = {S, A, B}.
<br><b><i>Шаг 2, 3.</i></b> Множество P′:
<br>- S → AB | A| B
<br>- A → 0A | 0;
<br>- B → 1B |1.
<br><b><i>Шаг 4.</i></b> Т.к. S ∈ N, то введем новый нетерминал С и пополним множество P`
 правилом вида C → S | ε. Результирующая грамматика будет иметь вид:
G` = {(0, 1}, {S, A, B, C}, P, C) с правилами P′:
<br> 1) C → S | ε;
<br> 2) S → AB | A | B;
<br> 3) A → 0A | 0;
<br> 4) B → B1 | 1.

<br><b><u>Алгоритм 5.</u></b> Устранение цепных правил
 
<br>Вход: КС-грамматика G=(V<sub>T</sub>, V<sub>N</sub>, P, S)
<br>Выход: Эквивалентная КС-грамматика G′ = (V<sub>T</sub>, V<sub>`N</sub>, P′, S′) без цепных
правил, т.е. правил вида A → B, где A, B ∈ V<sub>N</sub>.
 
<br><b><i>Шаг 1.</i></b> Для каждого нетерминала A вычислить множество выводимых из
него нетерминалов, т.е. множество N<sup>A</sup> ={B | A ⇒ *B, где B ∈ V<sub>N</sub>}.
<br>- 1.1 Положить N<sub>0</sub><sup>A</sup> = {A}.
<br>- 1.2 Вычислить N<sub>i</sub><sup>A</sup> = N<sub>i-1</sub><sup>A</sup> ∪ {C | (B → C) ∈ P , B ∈ N<sub>i-1</sub><sup>A</sup>, C ∈ V<sub>N</sub>}.
<br>- 1.3 Если N<sub>i</sub><sup>A</sup> ≠ N<sub>i-1</sub><sup>A</sup>,  то  положить i := i+1  и  перейти  к  пункту 1.2, иначе
 считать N<sup>A</sup> = N<sub>i</sub><sup>A</sup>.

<br><b><i>Шаг 2.</i></b> Построить множество P′ так:
 <br> Если (B → α) ∈ P не является цепным правилом (α ∉ V<sup>N</sup>, то) включить в P′ правило A → α для каждого A, такого, что B ∈ N<sup>A</sup>.
 
<br><b>Пример 2.5.</b> Грамматика G=({+, n}, {L, M, N}, P, L) с правилами P:
<br> 1) L → M;
<br> 2) M → N;
<br> 3) N → N+ | n.
Преобразуем ее в эквивалентную грамматику G′ по <b>алгоритму 5</b>.
<br><b></b>Шаг 1.</i></b>
  
Т.к. $N_{2}L = N_{3}L$, то NL ={L, M, N}. 
 
 
<br><b><i>Шаг 2.</i></b> Преобразовав правила вывода грамматики, получим грамматику
 с правилами P′: 
...

<br><b><u>Алгоритм 6.</u></b> Устранение левой факторизации правил
 
<br>Вход: КС-грамматика G = ($V^{T}$, $V^{N}$, P,S).
<br>Выход: Эквивалентная КС-грамматика G′ = ($V^{T}$ , $V^{'T}$, P′, S′) .. без одинаковых префиксов в правых частях правил, определяющих нетерминалы. 
 
<br><b><i>Шаг 1.</b></i> Записать все правила для нетерминала X, имеющие одинаковые 
префиксы α ∈ $V^{*}$, в виде одного правила с альтернативами: 

<br><b><i>Шаг 2.</b></i> Вынести  за  скобки  влево  префикс  α   в  каждой  строке-альтернативе: X → α(β1|β2|...|βn). 

<br><b><i>Шаг 3.</b></i> Обозначить новым нетерминалом Y выражение, оставшееся в скобках:  X → αY, Y → β1 |β2 |...|βn. 

<br><b><i>Шаг 4.</b></i> Пополнить множество нетерминалов новым нетерминалом Y .. и 
заменить правила, подвергшиеся факторизации, новыми правилами для X и Y. 

<br><b><i>Шаг 5.</b></i> Повторить шаги 1-4 для всех нетерминалов грамматики, для которых это возможно и необходимо. 
 
<br><b>Пример 2.6.</b> Дана грамматика G=({k,l,m ,n}, {S}, P, S)  с правилами P .. :\
Преобразуем  ее  в эквивалентную грамматику G′ по <b>алгоритму 6</b>: 

<br><b><i>Шаг 1.</b></i> S → kSl | kSm | n. 

<br><b><i>Шаг 2.</b></i> S → kS (l | m) | n. 

<br><b><i>Шаг 3,4.</b></i> Пополнив множество нетерминалов новым нетерминалом С и 
заменив правила, подвергшиеся факторизации, получим грамматику.
 
.. с правилами P′:
- S → kSC; 
- S → n; 
- C → l; 
- C → m.
<br><b><u>Алгоритм 7.</b></u> Устранение прямой левой рекурсии 
 
<br>Вход: КС-грамматика G=($V^{T}$, $V^{N}$, P, S).
<br>Выход:  Эквивалентная  КС-грамматика G′ = ($V^{T}$, $V^{'N}$, P′, S′)  без  прямой левой рекурсии, т.е. без правил вида A→ Aα, A ∈VN, α∈V*  .

<br><b><i>Шаг 1.</b></i> Вывести из грамматики все правила для рекурсивного нетерминала X: 
 

<br><b><i>Шаг 2.</b></i> Внести новый нетерминал Y так, чтобы он описывал любой 
«хвост» строки, порождаемой рекурсивным нетерминалом X : 
 
 
<br><b><i>Шаг 3.</b></i> Заменить в рекурсивном правиле для X правую часть, используя 
новый нетерминал и все не рекурсивные правила для X так, чтобы генерируемый язык не изменился: 
 

<br><b><i>Шаг 4.</b></i> Пополнить множество нетерминалов грамматики новым нетерминалом Y. Пополнить множество правил грамматики правилами, полученными на шаге 3. 

<br><b><i>Шаг 5.</b></i> Повторить действия шагов 1-4 для всех рекурсивных нетерминалов грамматики, после чего полученные множества нетерминалов и правил принять в качестве $V^{'N}$ и P′.
 
<br><b>Пример 4.7.</b> Дана грамматика G=({a, b, c, d, z} ,{S, A, B, C}, P, S) с правилами P:
- S → Aa; 
- A → Bb; 
- B → Cc|d; 
- C → Ccbz |dbz.  
После устранения  прямой  левой  рекурсии  получим  эквивалентную  грамматику 
G′=({a,b,c,d,z}, {S, A, B, C, Z}, P′, S) с правилами  P′:  

</div>
 

